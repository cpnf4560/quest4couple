<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Sexy Question Packs - Completo</title>
<style>
body { 
  font-family: Arial, sans-serif; 
  margin: 8px; 
  background: 
    radial-gradient(circle at 15% 25%, rgba(214, 51, 132, 0.35) 0%, transparent 35%),
    radial-gradient(circle at 85% 75%, rgba(111, 66, 193, 0.30) 0%, transparent 35%),
    radial-gradient(circle at 50% 10%, rgba(38, 198, 218, 0.20) 0%, transparent 35%),
    radial-gradient(circle at 20% 70%, rgba(232, 62, 140, 0.15) 0%, transparent 30%),
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 15px,
      rgba(255, 255, 255, 0.08) 15px,
      rgba(255, 255, 255, 0.08) 17px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 30px,
      rgba(214, 51, 132, 0.03) 30px,
      rgba(214, 51, 132, 0.03) 32px
    ),
    linear-gradient(135deg, #e8ecf0 0%, #d1d9e0 100%);
  font-size: 16px; 
  min-height: 100vh; 
}
.header { 
  text-align: center; 
  margin-bottom: 20px;
  position: relative;
}

.header::before {
  content: '';
  position: absolute;
  top: -20px;
  left: 0;
  right: 0;
  height: 250px;
  background: 
    radial-gradient(circle at 50% 50%, rgba(214, 51, 132, 0.4) 2px, transparent 2px),
    radial-gradient(circle at 25% 25%, rgba(111, 66, 193, 0.3) 1px, transparent 1px),
    radial-gradient(circle at 75% 75%, rgba(38, 198, 218, 0.25) 1.5px, transparent 1.5px);
  background-size: 40px 40px, 20px 20px, 60px 60px;
  opacity: 0.7;
  z-index: -1;
  pointer-events: none;
}
.logo-section { margin-bottom: 25px; }
.logo { 
  width: 120px; 
  height: 120px; 
  margin-bottom: 10px;
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
}
.logo-section h1 { 
  margin: 10px 0 5px 0; 
  font-size: 28px; 
  color: #d63384;
  font-weight: bold;
  text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.tagline { 
  margin: 0; 
  font-size: 16px; 
  color: #6f42c1; 
  font-style: italic;
}
.user-section { margin: 20px 0; }
.user-section label { font-weight: bold; font-size: 16px; color: #495057; }
.user-section input { font-size: 16px; padding: 8px; }
.controls { display: flex; gap: 8px; justify-content: center; margin-bottom: 25px; flex-wrap: wrap; }
.compatibility-section { margin: 20px 0; padding: 20px; border-radius: 10px; }
.super-match { background-color: #d4edda; border-left: 5px solid #28a745; }
.match { background-color: #d1ecf1; border-left: 5px solid #17a2b8; }
.maybe { background-color: #fff3cd; border-left: 5px solid #ffc107; }
.special { background-color: #f8d7da; border-left: 5px solid #dc3545; }
.btn { background: linear-gradient(135deg, #d63384, #e83e8c); color: white; border: none; padding: 12px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; touch-action: manipulation; box-shadow: 0 2px 4px rgba(214, 51, 132, 0.3); transition: all 0.3s ease; }
.btn:hover { background: linear-gradient(135deg, #b02a5b, #d63384); transform: translateY(-1px); box-shadow: 0 4px 8px rgba(214, 51, 132, 0.4); }
.btn-secondary { background: linear-gradient(135deg, #6f42c1, #8e5cc7); }
.btn-secondary:hover { background: linear-gradient(135deg, #5a2d91, #6f42c1); transform: translateY(-1px); }

.pack { 
  margin-bottom: 20px; 
  border-radius: 10px; 
  color: white; 
  overflow: hidden; 
  box-shadow: 0 4px 15px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}
.pack-header { padding: 15px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; user-select: none; }
.pack-header h2 { margin: 0; font-size: 18px; flex: 1; }
.toggle-icon { font-size: 16px; margin-left: 15px; transition: transform 0.3s; }
.pack-content { max-height: none; overflow: visible; transition: max-height 0.3s ease-out; }
.pack-content.collapsed { max-height: 0; overflow: hidden; }
.vanilla { background: linear-gradient(135deg, #ff6b9d, #e83e8c); }
.orientacao { background: linear-gradient(135deg, #a17fe0, #6f42c1); }
.cuckold { background: linear-gradient(135deg, #ff4081, #d63384); }
.swing { background: linear-gradient(135deg, #26c6da, #00acc1); }
.kinks { background: linear-gradient(135deg, #c62828, #ad1457); }

.question { 
  margin: 5px 15px; 
  padding: 12px; 
  background-color: rgba(255,255,255,0.2); 
  border-radius: 8px; 
  display: flex; 
  align-items: flex-start; 
  gap: 15px; 
  min-height: auto;
}

.question-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.question-text { 
  font-weight: 500; 
  line-height: 1.3; 
  font-size: 15px; 
  margin: 0;
}

.question-options { 
  display: flex; 
  justify-content: space-around; 
  align-items: center; 
  min-width: 250px; 
  flex-shrink: 0;
  padding: 0 5px;
}

/* Estilo das op√ß√µes individuais */
.option-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.option-label {
  font-size: 12px;
  font-weight: bold;
  text-align: center;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 2px;
}

.question-options input[type="radio"] { 
  width: 20px; 
  height: 20px; 
  cursor: pointer;
  transform: scale(1.2);
}

.comments textarea { 
  width: 100%; 
  height: 35px; 
  padding: 8px; 
  border-radius: 5px; 
  border: 1px solid #ccc; 
  resize: vertical; 
  font-size: 14px; 
  min-height: 35px;
  font-family: inherit;
}

h1 { margin: 10px 0 15px 0; font-size: 24px; }
.collapsed .toggle-icon { transform: rotate(-90deg); }

.pack-actions {
  margin: 20px 15px 10px 15px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.pack-result {
  margin: 15px;
  padding: 20px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 10px;
  color: #333;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.pack-result h3 {
  margin: 0 0 15px 0;
  color: #d63384;
  font-size: 18px;
}

.pack-result .score {
  font-size: 24px;
  font-weight: bold;
  margin: 10px 0;
}

.pack-result .interpretation {
  margin: 15px 0;
  line-height: 1.5;
}

.pack-result .level {
  padding: 8px 16px;
  border-radius: 20px;
  font-weight: bold;
  display: inline-block;
  margin: 5px 0;
}

.level-baixo { background: #d1ecf1; color: #0c5460; }
.level-moderado { background: #fff3cd; color: #856404; }
.level-alto { background: #f8d7da; color: #721c24; }
.level-muito-alto { background: #d4edda; color: #155724; }

/* Responsividade Mobile */
@media (max-width: 768px) {
  body { margin: 5px; font-size: 16px; }
  .logo { width: 80px; height: 80px; }
  .logo-section h1 { font-size: 22px; }
  .tagline { font-size: 14px; }
  .controls { gap: 5px; }
  .btn { padding: 10px 12px; font-size: 13px; }
  
  .question { margin: 5px 10px; padding: 10px; }
  .question-text { font-size: 14px; }
  
  .option-label { 
    font-size: 11px;
  }
  
  .question-options input[type="radio"] { 
    width: 18px; 
    height: 18px; 
  }
  
  .pack-header { padding: 12px 15px; }
  .pack-header h2 { font-size: 16px; }
}

@media (max-width: 480px) {
  .question {
    flex-direction: column;
    align-items: stretch;
  }
  
  .question-options {
    justify-content: space-between;
    margin: 8px 0;
    padding: 0 5px;
    min-width: auto;
    gap: 2px;
  }
  
  .option-item {
    gap: 2px;
  }
  
  .option-label {
    font-size: 10px;
  }
  
  .pack-actions {
    flex-direction: column;
  }
}

@media print {
  .controls { display: none; }
  .pack { page-break-inside: avoid; }
}
</style>
</head>
<body>
<div class="header">  <div class="logo-section">
    <img src="./logo.png" alt="Quest4Couple Logo" class="logo" onerror="this.src='./logo.jpg'; this.onerror=null;">
    <h1>Quest4Couple</h1>
    <p class="tagline">Descubram-se juntos üíï</p>
  </div>
  
  <div class="user-section">
    <label for="userName">üë§ Seu Nome:</label>
    <input type="text" id="userName" placeholder="Digite seu nome..." style="margin: 0 10px; padding: 5px; border-radius: 3px; border: 1px solid #ccc;">
  </div>
  
  <div class="controls">
    <button class="btn" onclick="toggleAllPacks()">Expandir/Colapsar Todos</button>
    <button class="btn" onclick="saveAnswers()">üíæ Guardar Respostas Encriptadas</button>
    <button class="btn" onclick="showCompareSection()">üîÄ Comparar com Parceiro/a</button>
    <button class="btn btn-secondary" onclick="generatePDF()">üìÑ Gerar PDF</button>
    <button class="btn btn-secondary" onclick="sendByEmail()">üìß Enviar por Email</button>
  </div>
    <div id="compareSection" style="display: none; margin: 15px 0; padding: 15px; background: #e9ecef; border-radius: 8px;">
    <h3>üîç Comparar Respostas do Casal</h3>
    <div style="margin: 10px 0;">
      <label>üìÅ Carregar SEU arquivo .q4c:</label>
      <input type="file" id="myFile" accept=".q4c" style="margin-left: 10px;">
    </div>
    <div style="margin: 10px 0;">
      <label>üìÅ Carregar arquivo .q4c do/a parceiro/a:</label>
      <input type="file" id="partnerFile" accept=".q4c" style="margin-left: 10px;">
    </div>
    <div style="margin: 10px 0;">
      <label>üîë C√≥digo de seguran√ßa:</label>
      <input type="password" id="securityCode" placeholder="Digite o c√≥digo usado..." style="margin-left: 10px; padding: 5px; border-radius: 3px; border: 1px solid #ccc;">
    </div>
    <button class="btn" onclick="compareEncryptedAnswers()">üéØ Gerar Relat√≥rio de Compatibilidade</button>
    
    <div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 5px; font-size: 11px;">
      üí° <strong>Como funciona:</strong><br>
      1. Cada pessoa responde no seu PC e gera um arquivo .q4c<br>
      2. Partilham os arquivos entre si (email, WhatsApp, etc.)<br>
      3. Qualquer um pode carregar ambos os arquivos aqui e ver o relat√≥rio<br>
      4. Usem o mesmo c√≥digo de seguran√ßa que definiram ao guardar
    </div>
  </div>
  
  <div id="compatibilityReport" style="display: none;"></div>
</div>

<script>
function createQuestion(name, text) {
  return `<div class='question'>
    <div class='question-content'>
      <div class='question-text'>${text}</div>
      <textarea placeholder='Coment√°rios (opcional)'></textarea>
    </div>
    <div class='question-options'>
      <div class='option-item'>
        <div class='option-label'>0</div>
        <input type='radio' name='${name}' value='0'>
      </div>
      <div class='option-item'>
        <div class='option-label'>1</div>
        <input type='radio' name='${name}' value='1'>
      </div>
      <div class='option-item'>
        <div class='option-label'>2</div>
        <input type='radio' name='${name}' value='2'>
      </div>
      <div class='option-item'>
        <div class='option-label'>3</div>
        <input type='radio' name='${name}' value='3'>
      </div>
      <div class='option-item'>
        <div class='option-label'>4</div>
        <input type='radio' name='${name}' value='4'>
      </div>
      <div class='option-item'>
        <div class='option-label'>5</div>
        <input type='radio' name='${name}' value='5'>
      </div>
    </div>
  </div>`;
}

// Fun√ß√£o createOptionsHeader removida - agora usamos labels individuais

function createPack(className, title, questions) {
  let questionsHtml = questions.map((q,i) => createQuestion(className+i, q)).join('');
  document.write(`
    <div class='pack ${className}'>
      <div class='pack-header' onclick='togglePack("${className}")'>
        <h2>${title}</h2>
        <span class='toggle-icon'>‚ñº</span>
      </div>
      <div class='pack-content' id='${className}-content'>
        ${questionsHtml}
        <div class='pack-actions'>
          <button class='btn pack-result-btn' onclick='calculatePackResult("${className}")'>üìä Ver Resultado</button>
          <button class='btn btn-secondary pack-export-btn' onclick='exportPackResult("${className}")' style='display:none;'>üìÑ Exportar Resultado</button>
        </div>
        <div class='pack-result' id='result-${className}' style='display:none;'></div>
      </div>
    </div>
  `);
}

function togglePack(packId) {
  const content = document.getElementById(packId + '-content');
  const header = content.previousElementSibling;
  const icon = header.querySelector('.toggle-icon');
  
  content.classList.toggle('collapsed');
  header.classList.toggle('collapsed');
}

function toggleAllPacks() {
  const allContents = document.querySelectorAll('.pack-content');
  const isAnyExpanded = Array.from(allContents).some(content => !content.classList.contains('collapsed'));
  
  allContents.forEach(content => {
    const header = content.previousElementSibling;
    if (isAnyExpanded) {
      content.classList.add('collapsed');
      header.classList.add('collapsed');
    } else {
      content.classList.remove('collapsed');
      header.classList.remove('collapsed');
    }
  });
}

function generatePDF() {
  window.print();
}

function printForm() {
  window.print();
}

function sendByEmail() {
  const results = collectFormData();
  const subject = encodeURIComponent('Sexy Question Packs - Respostas');
  const body = encodeURIComponent(`Ol√°!\n\nAqui est√£o as minhas respostas ao question√°rio:\n\n${results}\n\nBeijos! üíï`);
  window.open(`mailto:?subject=${subject}&body=${body}`);
}

function collectFormData() {
  let results = '';
  const packs = document.querySelectorAll('.pack');
  
  packs.forEach(pack => {
    const title = pack.querySelector('h2').textContent;
    results += `\n=== ${title} ===\n\n`;
    
    const questions = pack.querySelectorAll('.question');
    questions.forEach((question, index) => {
      const text = question.querySelector('.question-text').textContent;
      const selectedRadio = question.querySelector('input[type="radio"]:checked');
      const comment = question.querySelector('textarea').value;
      
      if (selectedRadio || comment) {
        results += `${index + 1}. ${text}\n`;
        if (selectedRadio) {
          results += `   Resposta: ${getAnswerText(selectedRadio.value)}\n`;
        }
        if (comment) {
          results += `   Coment√°rio: ${comment}\n`;
        }
        results += '\n';
      }
    });
  });
  
  return results;
}

function getAnswerText(value) {
  const answers = {
    '0': 'Nada (0)',
    '1': 'Muito Pouco (1)',
    '2': 'Pouco (2)', 
    '3': 'Moderado (3)',
    '4': 'Muito (4)',
    '5': 'Extremamente (5)'
  };
  return answers[value] || value;
}

let packs = {
  vanilla: ["Prefiro sexo lento e rom√¢ntico.", "Gosto de experimentar novas posi√ß√µes sexuais.", "Fantasiei em fazer bondage leve.", "Gosto de ser dominado/a.", "Gosto de dominar o/a parceiro/a.", "Fantasiei em spanking leve.", "Prefiro sexo sem brincadeiras sexuais avan√ßadas.", "Gosto de usar lingerie sensual.", "Fantasiei em roleplay (professor/aluno, m√©dico/paciente‚Ä¶).", "Gosto de sexo ao som de m√∫sica suave.", "Prefiro preliminares longas.", "Fantasiei em submiss√£o consensual.", "Gosto de explorar √≥leos ou massagens er√≥ticas.", "Fantasiei em ser humilhado/a de forma leve.", "Gosto de sexo r√°pido e espont√¢neo.", "Prefiro sexo apenas com toque f√≠sico, sem fetiches.", "Fantasiei em voyeurismo ou exibicionismo discreto.", "Gosto de experimentar brinquedos sexuais.", "Fantasiei em ser apenas objeto de prazer.", "Prefiro rela√ß√µes sexuais mon√≥tonas e previs√≠veis.", "Fantasiei em experimentar vendas ou priva√ß√£o sensorial.", "Gosto de sexo em locais diferentes da casa.", "Fantasiei em cuckold ou cuckquean.", "Prefiro sexo apenas com conex√£o emocional forte.", "Fantasiei em experi√™ncias BDSM moderadas."],

  orientacao: ["Sinto atra√ß√£o por homens.", "Sinto atra√ß√£o por mulheres.", "Sinto atra√ß√£o por pessoas n√£o-bin√°rias.", "J√° fantaseei com algu√©m do mesmo sexo.", "J√° fantaseei com algu√©m de g√©nero diferente.", "Atraio-me a pessoas de v√°rios g√©neros.", "Gosto de experi√™ncias a tr√™s com g√©neros diferentes.", "Fantasiei em experimentar sexo com mais de duas pessoas.", "Tenho curiosidade sobre pansexualidade.", "Sinto atra√ß√£o por travestys ou crossdressers.", "J√° tive experi√™ncias sexuais com pessoas do mesmo sexo.", "Prefiro rela√ß√µes heterossexuais.", "Fantasiei em beijo triplo ou m√©nage.", "Tenho atra√ß√£o por casais.", "Sinto atra√ß√£o sexual por pessoas mais velhas.", "Sinto atra√ß√£o sexual por pessoas mais novas.", "J√° explorei fetiches com m√∫ltiplos g√©neros.", "Sinto-me confort√°vel com relacionamentos n√£o-monog√¢micos.", "Fantasiei em participar em orgias privadas.", "Gosto de sexo anal independentemente do g√©nero.", "Fantasiei em voyeurismo com diferentes g√©neros.", "Sinto atra√ß√£o por pessoas trans.", "J√° participei em swing ou troca de casais.", "Tenho atra√ß√£o por interracial/BBC.", "Sinto-me atra√≠do/a sexualmente por pessoas do meu g√©nero."],

  cuckold: ["Fantasiei em ver o/a meu/minha parceiro/a com outra pessoa.", "Fico excitado/a com humilha√ß√£o consensual.", "Gosto de submiss√£o sexual.", "Fantasiei em ser tra√≠do/a consensualmente.", "Tenho curiosidade sobre cuckold.", "J√° participei em roleplay cuckold.", "Gosto de voyeurismo sobre o/a parceiro/a.", "Fantasiei em ser humilhado/a por outro/a.", "Aprecio domin√¢ncia do/a parceiro/a sobre mim.", "Fantasiei em sexo a tr√™s com o/a meu/minha parceiro/a e outro/a.", "Gosto de submiss√£o verbal.", "Fantasiei em orgasmo proibido.", "Tenho curiosidade sobre cuckquean.", "Fantasiei em controle total do/a parceiro/a.", "Aprecio pequenas provoca√ß√µes sexuais externas.", "Fantasiei em humilha√ß√£o f√≠sica leve.", "Gosto de submiss√£o psicol√≥gica.", "Fantasiei em dar prazer a outra pessoa enquanto observo.", "Aceito ser desafiado/a sexualmente pelo/a parceiro/a.", "Fantasiei em situa√ß√µes de limita√ß√£o de escolha sexual.", "Curto a ideia de ser apenas objeto sexual por momentos.", "Fantasiei em gravar cenas de cuckold consensual.", "Aceito pequenas regras de submiss√£o na intimidade.", "Fantasiei em experimentar edge play dentro do consentimento.", "Tenho interesse em din√¢micas de poder com o/a parceiro/a."],

  swing: ["Fantasiei em sexo a tr√™s.", "Gostaria de participar num swing discreto.", "J√° imaginei ver o/a meu/minha parceiro/a com outra pessoa.", "Tenho curiosidade sobre orgias privadas.", "Fantasiei em experi√™ncias poliamorosas no estrangeiro.", "Gostaria de parceiros sexuais m√∫ltiplos com regras claras.", "Aceito compartilhar o/a parceiro/a com consentimento.", "Fantasiei em tri√¢ngulos amorosos duradouros.", "Curto a ideia de swing com amigos.", "Fantasiei em invers√£o de pap√©is em grupo.", "Gosto de festas privadas com foco em sexo consensual.", "Aceito ser observador/a durante sexo a tr√™s.", "Fantasiei em sexo interracial com parceiros diferentes.", "Tenho curiosidade em criar rede poliamorosa.", "Fantasiei em sexo planeado com outra pessoa.", "Aceito regras de exclusividade sexual parcial.", "Fantasiei em compartilhar encontros com outros casais.", "Curto a ideia de orgias privadas com regras.", "Fantasiei em parceiros fixos apenas para sexo.", "Tenho interesse em swing em locais privados.", "Fantasiei em sexo em grupo com consentimento total.", "Curto voyeurismo controlado em grupo.", "Fantasiei em ver o/a parceiro/a receber prazer de outro/a.", "Aceito experimentar novos g√©neros de parceiros.", "Fantasiei em encontros secretos discretos."],

  kinks: ["Fantasiei em shibari (cordas japonesas).", "Tenho fetiche por p√©s.", "Gosto de latex ou couro na intimidade.", "Fantasiei em spanking pesado.", "Curto wax play (cera quente).", "Fantasiei em electro play leve.", "Tenho curiosidade sobre needle play (agulhas).", "Fantasiei em roleplay de uniformes.", "Gosto de foot worship.", "Fantasiei em humilha√ß√£o er√≥tica.", "Curto pegging (mulher com strap-on).", "Fantasiei em bondage extremo leve.", "Tenho fetiche por m√°scaras.", "Fantasiei em trampling (ser pisado/a).", "Curto sensory deprivation (priva√ß√£o sensorial).", "Fantasiei em medical fetish.", "Tenho curiosidade sobre pet play (animal submisso).", "Fantasiei em objectifica√ß√£o.", "Curto CBT (tortura genital consensual).", "Fantasiei em submiss√£o total.", "Tenho interesse em dominatrix.", "Fantasiei em cenas de voyeurismo controlado.", "Curto spanking com prop√≥sito de prazer.", "Fantasiei em submiss√£o prolongada.", "Tenho interesse em edge play consensual."]
};

// Fun√ß√µes para calcular e exportar resultados dos packs
function calculatePackResult(packClass) {
  const packElement = document.querySelector(`.${packClass}`);
  const questions = packElement.querySelectorAll('.question');
  const title = packElement.querySelector('h2').textContent;
  
  let total = 0;
  let answered = 0;
  
  questions.forEach(question => {
    const selected = question.querySelector('input[type="radio"]:checked');
    if (selected) {
      total += parseInt(selected.value);
      answered++;
    }
  });
  
  if (answered === 0) {
    alert('Por favor, responda pelo menos a algumas perguntas antes de ver o resultado!');
    return;
  }
  
  const percentage = Math.round((total / (answered * 5)) * 100);
  const interpretation = getInterpretation(packClass, percentage);
  
  const resultDiv = document.getElementById(`result-${packClass}`);
  resultDiv.innerHTML = `
    <h3>üìä Resultado: ${title}</h3>
    <div class="score">
      ${percentage}% 
      <span class="level ${interpretation.levelClass}">${interpretation.level}</span>
    </div>
    <div class="interpretation">
      <strong>Interpreta√ß√£o:</strong><br>
      ${interpretation.text}
    </div>
    <div style="margin-top: 15px; font-size: 14px; color: #666;">
      <strong>Estat√≠sticas:</strong> ${answered} de ${questions.length} perguntas respondidas | Pontua√ß√£o: ${total}/${answered * 5}
    </div>
  `;
  
  resultDiv.style.display = 'block';
  document.querySelector(`.${packClass} .pack-export-btn`).style.display = 'inline-block';
  
  // Scroll suave para o resultado
  resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function getInterpretation(packClass, percentage) {
  const interpretations = {
    vanilla: {
      0: { level: 'Muito Kink', levelClass: 'level-muito-alto', text: 'Tens uma forte prefer√™ncia por experi√™ncias BDSM e kinks. O sexo "vanilla" tradicional pode n√£o ser suficientemente estimulante para ti.' },
      25: { level: 'Kink', levelClass: 'level-alto', text: 'Gostas de experi√™ncias mais intensas e n√£o convencionais. Tens interesse significativo em pr√°ticas BDSM e kinks.' },
      50: { level: 'Equilibrado', levelClass: 'level-moderado', text: 'Tens um equil√≠brio entre prefer√™ncias vanilla e kink. Gostas tanto de intimidade rom√¢ntica quanto de experi√™ncias mais ousadas.' },
      75: { level: 'Vanilla', levelClass: 'level-baixo', text: 'Preferes intimidade rom√¢ntica e conex√£o emocional. O sexo suave e carinhoso √© mais atrativo para ti do que pr√°ticas intensas.' },
      100: { level: 'Muito Vanilla', levelClass: 'level-baixo', text: 'Tens uma forte prefer√™ncia por intimidade rom√¢ntica e suave. Pr√°ticas BDSM ou kinks n√£o te atraem.' }
    },
    orientacao: {
      0: { level: 'Heterossexual', levelClass: 'level-baixo', text: 'Sentes atra√ß√£o principalmente por pessoas do g√©nero oposto. Tens pouca curiosidade sobre experi√™ncias com outros g√©neros.' },
      25: { level: 'Heteroflex√≠vel', levelClass: 'level-moderado', text: 'Principalmente heterossexual, mas com alguma curiosidade ou abertura para experi√™ncias com o mesmo g√©nero.' },
      50: { level: 'Bissexual', levelClass: 'level-alto', text: 'Sentes atra√ß√£o por m√∫ltiplos g√©neros. Tens interesse tanto em homens quanto em mulheres.' },
      75: { level: 'Pansexual', levelClass: 'level-muito-alto', text: 'Sentes atra√ß√£o por pessoas independentemente do g√©nero. Est√°s aberto/a a diversas identidades de g√©nero.' },
      100: { level: 'Explorador/a', levelClass: 'level-muito-alto', text: 'Tens grande curiosidade e abertura para explorar atra√ß√£o e experi√™ncias com diversos g√©neros e identidades.' }
    },
    cuckold: {
      0: { level: 'Sem Interesse', levelClass: 'level-baixo', text: 'N√£o tens interesse em cuckold/cuckquean. Preferes exclusividade e n√£o gostas de partilhar o/a parceiro/a.' },
      25: { level: 'Curiosidade Leve', levelClass: 'level-moderado', text: 'Tens alguma curiosidade sobre cuckold, mas ainda n√£o √© um interesse forte. Podes fantasiar ocasionalmente.' },
      50: { level: 'Interesse Moderado', levelClass: 'level-alto', text: 'Tens interesse significativo em cuckold/cuckquean. A ideia de ver ou ser visto/a com outros √© excitante.' },
      75: { level: 'Alto Interesse', levelClass: 'level-muito-alto', text: 'Tens forte interesse em din√¢micas cuckold. A humilha√ß√£o consensual e voyeurismo s√£o muito atraentes para ti.' },
      100: { level: 'Muito Alto', levelClass: 'level-muito-alto', text: 'Cuckold/cuckquean √© uma fantasia central para ti. Tens forte desejo de experimentar ou j√° praticas estas din√¢micas.' }
    },
    swing: {
      0: { level: 'Mon√≥gamo/a', levelClass: 'level-baixo', text: 'Preferes relacionamentos exclusivos. N√£o tens interesse em partilhar experi√™ncias √≠ntimas com outros casais.' },
      25: { level: 'Curioso/a', levelClass: 'level-moderado', text: 'Tens alguma curiosidade sobre swing ou poliamor, mas ainda n√£o √© uma prioridade forte.' },
      50: { level: 'Interessado/a', levelClass: 'level-alto', text: 'Tens interesse significativo em experi√™ncias com m√∫ltiplos parceiros. Swing ou poliamor s√£o atraentes para ti.' },
      75: { level: 'Muito Interessado/a', levelClass: 'level-muito-alto', text: 'Tens forte desejo de experi√™ncias poliamorosas. A ideia de m√∫ltiplos parceiros √© muito excitante.' },
      100: { level: 'Poliamoroso/a', levelClass: 'level-muito-alto', text: 'Poliamor e swing s√£o centrais nas tuas fantasias. Relacionamentos n√£o-monog√¢micos s√£o ideais para ti.' }
    },
    kinks: {
      0: { level: 'Vanilla', levelClass: 'level-baixo', text: 'N√£o tens interesse em kinks ou fetiches. Preferes sexo tradicional sem pr√°ticas alternativas.' },
      25: { level: 'Explorador/a Iniciante', levelClass: 'level-moderado', text: 'Tens alguma curiosidade sobre kinks, mas ainda √©s cauteloso/a. Podes estar disposto/a a experimentar coisas leves.' },
      50: { level: 'Kinky Moderado/a', levelClass: 'level-alto', text: 'Tens interesse significativo em v√°rios kinks e fetiches. Gostas de experimentar pr√°ticas alternativas.' },
      75: { level: 'Muito Kinky', levelClass: 'level-muito-alto', text: 'Tens forte interesse em m√∫ltiplos kinks e fetiches. Pr√°ticas BDSM s√£o muito atraentes para ti.' },
      100: { level: 'Extremamente Kinky', levelClass: 'level-muito-alto', text: 'Kinks e fetiches s√£o centrais na tua sexualidade. Tens interesse em pr√°ticas avan√ßadas e diversificadas.' }
    }
  };
  
  const packInterpretations = interpretations[packClass];
  
  // Encontrar a interpreta√ß√£o mais pr√≥xima
  if (percentage <= 10) return packInterpretations[0];
  if (percentage <= 35) return packInterpretations[25];
  if (percentage <= 65) return packInterpretations[50];
  if (percentage <= 85) return packInterpretations[75];
  return packInterpretations[100];
}

function exportPackResult(packClass) {
  const packElement = document.querySelector(`.${packClass}`);
  const title = packElement.querySelector('h2').textContent;
  const resultDiv = document.getElementById(`result-${packClass}`);
  
  if (!resultDiv || resultDiv.style.display === 'none') {
    alert('Por favor, calcule o resultado primeiro!');
    return;
  }
  
  const userName = document.getElementById('userName').value.trim() || 'Usu√°rio';
  const resultText = resultDiv.textContent;
  
  const exportContent = `
=== QUEST4COUPLE - RESULTADO INDIVIDUAL ===

üë§ Nome: ${userName}
üìÖ Data: ${new Date().toLocaleDateString('pt-PT')}
üìä Categoria: ${title}

${resultText}

---
Gerado pelo Quest4Couple
Descubram-se juntos üíï
  `.trim();
  
  const blob = new Blob([exportContent], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `quest4couple_${packClass}_${userName.toLowerCase().replace(/\s+/g, '_')}.txt`;
  a.click();
  URL.revokeObjectURL(url);
  
  alert(`‚úÖ Resultado de "${title}" exportado com sucesso!`);
}

for (let key in packs) {
  let titles = {vanilla:'üíï Vanilla ou Kink', orientacao:'üè≥Ô∏è‚Äçüåà Orienta√ß√£o Sexual', cuckold:'üëÄ N√≠vel Stag/Cuckold', swing:'üíû Swing/Poliamor', kinks:'üé≠ Fetiches & Kinks'};
  createPack(key, titles[key], packs[key]);
}

// Funcionalidades para casal
function saveAnswers() {
  const userName = document.getElementById('userName').value.trim();
  if (!userName) {
    alert('Por favor, digite seu nome primeiro!');
    return;
  }
  
  const answers = collectAnswersData();
  if (Object.keys(answers).length === 0) {
    alert('Responda pelo menos a algumas perguntas antes de guardar!');
    return;
  }
  
  // Pedir c√≥digo de seguran√ßa
  const securityCode = prompt(`üîê Digite um c√≥digo de seguran√ßa que voc√™s dois conhecem:\n(Ex: data de nascimento, nome de animal, etc.)\n\nEste c√≥digo ser√° usado para desencriptar as respostas.`);
  
  if (!securityCode || securityCode.trim().length < 3) {
    alert('‚ùå C√≥digo deve ter pelo menos 3 caracteres!');
    return;
  }
  
  const data = {
    name: userName,
    timestamp: new Date().toISOString(),
    answers: answers,
    totalQuestions: Object.keys(answers).length
  };
  
  // Encriptar os dados
  const encryptedData = encryptData(JSON.stringify(data), securityCode.trim());
  
  const blob = new Blob([encryptedData], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `quest4couple_${userName.toLowerCase().replace(/\s+/g, '_')}.q4c`;
  a.click();
  URL.revokeObjectURL(url);
  
  alert(`‚úÖ Arquivo encriptado de ${userName} guardado com sucesso!\n\nüîí Extens√£o: .q4c (Quest4Couple)\nüíæ Partilhe este arquivo com seu/sua parceiro/a\nüîë N√£o esque√ßa o c√≥digo de seguran√ßa: "${securityCode}"`);
}

function collectAnswersData() {
  const answers = {};
  const questions = document.querySelectorAll('.question');
  
  questions.forEach(question => {
    const selectedRadio = question.querySelector('input[type="radio"]:checked');
    const comment = question.querySelector('textarea').value;
    const text = question.querySelector('.question-text').textContent;
    
    if (selectedRadio) {
      answers[text] = {
        response: selectedRadio.value,
        comment: comment || ''
      };
    }
  });
  
  return answers;
}

function showCompareSection() {
  const section = document.getElementById('compareSection');
  section.style.display = section.style.display === 'none' ? 'block' : 'none';
}

// Fun√ß√£o de encripta√ß√£o simples
function encryptData(text, key) {
  let result = '';
  for (let i = 0; i < text.length; i++) {
    const charCode = text.charCodeAt(i) ^ key.charCodeAt(i % key.length);
    result += String.fromCharCode(charCode);
  }
  return btoa(result); // Base64 encode
}

// Fun√ß√£o de desencripta√ß√£o
function decryptData(encryptedText, key) {
  try {
    const decoded = atob(encryptedText); // Base64 decode
    let result = '';
    for (let i = 0; i < decoded.length; i++) {
      const charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
      result += String.fromCharCode(charCode);
    }
    return result;
  } catch (error) {
    throw new Error('Erro na desencripta√ß√£o');
  }
}

function compareEncryptedAnswers() {
  const myFileInput = document.getElementById('myFile');
  const partnerFileInput = document.getElementById('partnerFile');
  const securityCode = document.getElementById('securityCode').value.trim();
  
  if (!myFileInput.files[0]) {
    alert('üìÅ Selecione SEU arquivo .q4c!');
    return;
  }
  
  if (!partnerFileInput.files[0]) {
    alert('üìÅ Selecione o arquivo .q4c do/a seu/sua parceiro/a!');
    return;
  }
  
  if (!securityCode) {
    alert('üîë Digite o c√≥digo de seguran√ßa!');
    return;
  }
  
  // Ler primeiro arquivo (seu)
  const reader1 = new FileReader();
  reader1.onload = function(e1) {
    // Ler segundo arquivo (parceiro/a)
    const reader2 = new FileReader();
    reader2.onload = function(e2) {
      try {
        // Desencriptar ambos os arquivos
        const myDecrypted = decryptData(e1.target.result, securityCode);
        const partnerDecrypted = decryptData(e2.target.result, securityCode);
        
        const myData = JSON.parse(myDecrypted);
        const partnerData = JSON.parse(partnerDecrypted);
        
        generateCompatibilityReport(myData.name, myData.answers, partnerData.name, partnerData.answers);
        
      } catch (error) {
        alert('‚ùå Erro ao desencriptar os arquivos!\n\n' +
              'Poss√≠veis causas:\n' +
              '‚Ä¢ C√≥digo de seguran√ßa incorreto\n' +
              '‚Ä¢ Arquivos corrompidos\n' +
              '‚Ä¢ Arquivos n√£o s√£o do Quest4Couple\n\n' +
              'Verifique o c√≥digo e tente novamente.');
      }
    };
    reader2.readAsText(partnerFileInput.files[0]);
  };
  reader1.readAsText(myFileInput.files[0]);
}

function compareAnswers() {
  // Manter fun√ß√£o antiga para compatibilidade
  compareEncryptedAnswers();
}

function generateCompatibilityReport(user1, answers1, user2, answers2) {
  const compatibility = analyzeCompatibility(answers1, answers2);
  const reportDiv = document.getElementById('compatibilityReport');
  
  let html = `
    <div class="compatibility-section super-match">
      <h2>üî• RELAT√ìRIO DE COMPATIBILIDADE</h2>
      <h3>üíï ${user1} & ${user2}</h3>
      <p><strong>Data:</strong> ${new Date().toLocaleDateString('pt-PT')}</p>
    </div>
  `;
  
  if (compatibility.superMatches.length > 0) {
    html += `
      <div class="compatibility-section super-match">
        <h3>üåü SUPER MATCHES - Ambos querem MUITO! (${compatibility.superMatches.length})</h3>
        <ul>
          ${compatibility.superMatches.map(item => `<li><strong>${item}</strong></li>`).join('')}
        </ul>
      </div>
    `;
  }
  
  if (compatibility.matches.length > 0) {
    html += `
      <div class="compatibility-section match">
        <h3>‚úÖ MATCHES - Compat√≠veis para experimentar (${compatibility.matches.length})</h3>
        <ul>
          ${compatibility.matches.map(item => `<li>${item}</li>`).join('')}
        </ul>
      </div>
    `;
  }
  
  if (compatibility.special.length > 0) {
    html += `
      <div class="compatibility-section special">
        <h3>üíù ESPECIAIS - Um quer MUITO (aparecem sempre) (${compatibility.special.length})</h3>
        <ul>
          ${compatibility.special.map(item => `<li><em>${item}</em></li>`).join('')}
        </ul>
      </div>
    `;
  }
  
  if (compatibility.maybes.length > 0) {
    html += `
      <div class="compatibility-section maybe">
        <h3>ü§î PARA CONSIDERAR - Ambos em d√∫vida (${compatibility.maybes.length})</h3>
        <ul>
          ${compatibility.maybes.map(item => `<li>${item}</li>`).join('')}
        </ul>
      </div>
    `;
  }
  
  html += `
    <div class="compatibility-section">
      <h3>üìä ESTAT√çSTICAS</h3>
      <p><strong>Total de respostas comparadas:</strong> ${compatibility.total}</p>
      <p><strong>N√≠vel de compatibilidade:</strong> ${Math.round(compatibility.compatibilityScore)}%</p>
    </div>
  `;
  
  reportDiv.innerHTML = html;
  reportDiv.style.display = 'block';
  reportDiv.scrollIntoView({ behavior: 'smooth' });
}

function analyzeCompatibility(answers1, answers2) {
  const superMatches = [];
  const matches = [];
  const special = [];
  const maybes = [];
  let total = 0;
  let compatible = 0;
  
  for (const question in answers1) {
    if (answers2[question]) {
      total++;
      const resp1 = parseInt(answers1[question].response);
      const resp2 = parseInt(answers2[question].response);
      
      // Super matches: ambos com 4 ou 5
      if (resp1 >= 4 && resp2 >= 4) {
        superMatches.push(question);
        compatible += 2;
      }
      // Matches: ambos com 3+ ou diferen√ßa <= 1 com pelo menos um 3+
      else if ((resp1 >= 3 && resp2 >= 3) || (Math.abs(resp1 - resp2) <= 1 && (resp1 >= 3 || resp2 >= 3))) {
        matches.push(question);
        compatible += 1.5;
      }
      // Special: um tem 4+ e outro 1-2
      else if ((resp1 >= 4 && resp2 <= 2) || (resp2 >= 4 && resp1 <= 2)) {
        special.push(question);
        compatible += 1;
      }
      // Maybes: ambos com 2-3 ou diferen√ßa pequena
      else if ((resp1 >= 2 && resp2 >= 2) || Math.abs(resp1 - resp2) <= 2) {
        maybes.push(question);
        compatible += 0.5;
      }
    }
  }
  
  const compatibilityScore = total > 0 ? (compatible / (total * 2)) * 100 : 0;
  
  return {
    superMatches,
    matches,
    special,
    maybes,
    total,
    compatibilityScore
  };
}

// Iniciar todos os packs minimizados ao carregar a p√°gina
window.addEventListener('load', function() {
  const allContents = document.querySelectorAll('.pack-content');
  const allHeaders = document.querySelectorAll('.pack-header');
  
  allContents.forEach(content => {
    content.classList.add('collapsed');
  });
  
  allHeaders.forEach(header => {
    header.classList.add('collapsed');
  });
});
</script>

</body>
</html>
